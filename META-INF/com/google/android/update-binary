#!/sbin/sh
OUTFD=$2
ZIPFILE=$3

ui_print() {
  echo -n -e "ui_print $1\n" >> /proc/self/fd/$OUTFD
  echo -n -e "ui_print\n" >> /proc/self/fd/$OUTFD
}

ui_print " "
ui_print "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
ui_print "â•‘   DeepDoze Enforcer v1.5         â•‘"
ui_print "â•‘   Automatic Battery Saver        â•‘"
ui_print "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
ui_print " "

unzip -o "$ZIPFILE" -x 'META-INF/*' -d $MODPATH >&2

set_perm_recursive $MODPATH 0 0 0755 0644
set_perm_recursive $MODPATH/system/bin 0 0 0755 0755

ui_print "âœ… Installation complete"
ui_print "ðŸ“± Module will work automatically"
ui_print "ðŸ”‹ Battery savings start after reboot"

exit 0
